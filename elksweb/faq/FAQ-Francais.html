<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
  <head>
    <title>ELKS FAQ: Français</title>
    <base href="http://elks.sf.net/faq/FAQ-Francais.html">
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-15">
    <meta name="description" content="French FAQ for ELKS, a port of Linux for 16-bit Intel architectures">
    <meta name="generator" content="HTML Tidy, see www.w3.org">
    <meta name="keywords" content="Linux,linux-86,linux-8086,16-bit,UNIX,ELKS,FAQ">
  </head>

  <body bgcolor="White" text="Black" link="Blue" vlink="Magenta" alink="Red">
    <table border="0" width="100%" summary="Logo">
      <tr>
        <td width="20%" align="Left" valign="Top"><img src="../Images/ELKStag.gif" alt="ELKS Logo" height="77" width=
        "224"></td>

        <td width="70%" align="center" valign="middle"><font size="+2">ELKS FAQ - Français</font></td>

        <td width="10%" align="Right" valign="Top"><img src="../Images/ELKSlogo.gif" alt="Baby Linux Logo" height="77"
        width="65"></td>
      </tr>
    </table>

    <p align="center">| <a href="../CHANGELOG.txt">Website History</a> | <a href="../download/">Download</a> | FAQ | <a
    href="../history/">History</a> | <a href="../introduction.html">Introduction</a> | <a href="../lists/">Mailing Lists</a>
    | <a href="../news/">News</a> | <a href="../releases.html">Releases</a> | <a href="../">Home</a> |</p>
    <hr width="90%">

    <p align="justify">Le document présent est destiné à répondre aux questions les plus fréquentes concernant l'ELKS
    (Embeddable Linux Kernel Subset), aussi appelé Linux-8086. Ce nouveau noyau est en effet destiné à tourner sur les plus
    petits PC fonctionnels existants, les XT (principalement 8086 et 8088).</p>

    <p align="justify">Cette FAQ (Foire Aux Questions), maintenue par <a href="mailto:asl@launay.org">Arnaud Launay</a>, est
    basée sur la FAQ d'<a href="mailto:ajr@ecs.soton.ac.uk">Al Riddoch</a>, elle-même dérivée de la FAQ originale de Brian
    Candler. La dernière version de la Faq originale (en anglais) est accessible sur <a href=
    "http://elks.sf.net/faq/">http://elks.sf.net/faq/</a>.</p>

    <p align="justify">Des informations complémentaires peuvent être trouvées sur l'<a href="http://elks.sf.net/">ELKS Home Page</a>.</p>

    <p align="justify">Il existe par ailleurs une liste de diffusion en Anglais. Pour s'y abonner, envoyez un message (sans
    sujet et sans signature) à <a href="mailto:majordomo@vger.kernel.org">majordomo@vger.kernel.org</a>, contenant dans le
    corps les mots <b>subscribe linux-8086</b>.</p>

    <p align="justify">Pour se désabonner de la liste et ne plus recevoir les nombreux messages des usagers, envoyez un
    message (sans sujet et sans signature) à <a href="mailto:majordomo@vger.kernel.org">majordomo@vger.kernel.org</a>,
    contenant dans le corps les mots <b>unsubscribe linux-8086</b>.</p>

    <p align="justify">ELKS n'est pas Linux, et la liste de diffusion, malgré son nom, n'est pas le bon endroit pour poser
    des questions sur Linux. Voyez plutôt des groupes de discussion comme <a href=
    "news:comp.os.linux.answers">comp.os.linux.answers</a> ou <a href="news:fr.comp.os.linux">fr.comp.os.linux</a>.</p>
    <hr width="90%">

    <h2>Section 1 - Général</h2>

    <ul>
      <li><a href="#1.1">Q1.1. Qu'est ce que l'ELKS ?</a></li>
      <li><a href="#1.2">Q1.2. Comment l'ELKS peut-il être comparé au Linux classique ?</a></li>
      <li><a href="#1.3">Q1.3. Existe-t-il une version "prête à l'emploi" de l'ELKS ?</a></li>
      <li><a href="#1.4">Q1.4. ELKS peut-il tourner sur un 8088 ?</a></li>
      <li><a href="#1.5">Q1.5. À propos des processeurs 80188 et 80186</a></li>
      <li><a href="#1.6">Q1.6. À propos des processeurs NEC V20 et V30</a></li>
    </ul>

    <h2>Section 2 - Compilation et Installation</h2>

    <ul>
      <li><a href="#2.1">Q2.1. Où puis-je trouver les sources ?</a></li>
      <li><a href="#2.2">Q2.2. Comment créer un noyau ELKS ?</a></li>
      <li><a href="#2.3">Q2.3. J'obtiens une erreur m'affirmant que <tt>/usr/include/linux/vm86.h</tt> n'existe pas ?</a></li>
      <li><a href="#2.4">Q2.4. Comment créer un 'init' pour ELKS ?</a></li>
      <li><a href="#2.5">Q2.5. Comment créer un 'root filesystem disk' ?</a></li>
      <li><a href="#2.6">Q2.6. Que faire si mon XT a un lecteur 360k ?</a></li>
      <li><a href="#2.7">Q2.7. Comment changer la racine des images de lancement ?</a></li>
      <li><a href="#2.8">Q2.8. Comment l'installer sur un disque dur ?</a></li>
      <li><a href="#2.9">Q2.9. J'ai des erreurs à la compilation de Dev86 sur un Linux récent ?</a></li>
      <li><a href="#2.10">Q2.10. J'ai des erreurs à la compilation des elkscmd ?</a></li>
      <li><a href="#2.11">Q2.11. J'ai des avertissements à la compilation des elkscmd ?</a></li>
    </ul>

    <h2>Section 3 - Utiliser ELKS</h2>

    <ul>
      <li><a href="#3.1">Q3.1. Puis-je utiliser des binaires bcc sous Linux ?</a></li>
      <li><a href="#3.2">Q3.2. Puis-je booter l'ELKS sous DOSEMU ?</a></li>
    </ul>


    <hr width="90%">


    <h3><a name="1.1">Q1.1. Qu'est ce que l'ELKS ?</a></h3>

    <p align="justify">L'<b>ELKS</b> est l'<i>Embeddable Linux Kernel Subset</i>, un projet de construction d'un petit
    noyau correspondant à Linux (qui aura plus ou moins les fonctionnalités d'UNIX V7 dans le noyau) qui peut tourner sur
    des machines dont les ressources processeur et mémoire sont limitées. Plus d'informations sur l'arrière-plan, les buts et le status actuel du projet peuvent être trouvés sur l'<a href="http://elks.sf.net/">ELKS Home Page</a>.</p>

   <p align="justify">Les cibles initiales sont les Intel 8086 et
    éventuellement les 286 en mode 16 bits protégé. Un noyau pouvant tourner sur ce type de machine peut être utile pour les
    systèmes intégrés, pour le déploiement informatique du Tiers-Monde où les machines 80x86 x&gt;0 ne sont pas facilement
    disponibles, et pour l'utilisation sur divers portables.</p>

    <h3><a name="1.2">Q1.2. Comment l'ELKS peut-il être comparé au Linux Standard ?</a></h3>

    <p align="justify">ELKS est développé comme un sous-ensemble du vrai noyau Linux, et doit être suffisamment petit pour
    être compris par une seule personne, pour ainsi devenir un inévaluable moyen d'apprentissage. ELKS est récemment entré
    dans un stade de développement bêta et la plupart des fonctionnalités sont présentes.</p>

    <p align="justify">Ceci étant dit, le système peut déjà être lancé, donne des consoles virtuelles, monter un
    système de fichiers minix, procure un support des E/S série et parallèle basique, permettant la connexion à un autre
    ordinateur via un lien SLIP null-modem. Enfin, ELKS supporte la pagination, permettant d'élargir virtuellement la
    quantité dé mémoire disponible.</p>

    <h3><a name="1.3">Q1.3. Existe-t-il une version "prête à l'emploi" de l'ELKS ?</a></h3>

    <p align="justify">Pas pour le moment. Vous devrez utiliser une machine Linux standard, charger les sources, et
    cross-compiler pour générer le code 8086. Les images disques boot et root sont fournies avec la version actuelle de
    l'ELKS, mais elles sont uniquement prévues comme plateformes de tests pour le système, et leur utilisation est assez
    limitée.</p>

    <p align="justify">Si vous êtes intéressés par la construction d'une distribution basé sur ELKS, vous êtes le bienvenu.</p>

    <h3><a name="1.4">Q1.4. ELKS peut-il tourner sur un 8088 ?</a></h3>

    <p align="justify">Le 8088 est identique au 8086, sauf qu'il a un bus de données externe en 8 bits, au lieu de 16 bits;
    il est donc plus lent. Ainsi, oui, l'ELKS peut tourner sur un 8088.</p>
    <hr width="90%">

    <h3><a name="1.5">Q1.5. À propos des processeurs 80188 et 80186</a></h3>

    <p align="justify">Ces processeurs ne sont que des versions hautement intégrés des 8088 et 8086, donc ELKS tournera dessus.

    <h3><a name="1.6">Q1.6. À propos des processeurs NEC V20 et V30</a></h3>

    <p align="justify">D'un point de vue logiciel, ce sont simplement des processeurs 8088 et 8086, à la seule exception
    que l'instruction AAD ne peut pas être utilisée avec des bases autres que décimales sur le V20 et le V30, alors qu'elle
    peut être utilisée avec d'autres bases sur les 8088 et 8086. Cette différence n'empêchera pas ELKS de tourner sur ces
    processeurs, et l'on peut présumer que le noyau ne sera pas affecté par cette différence; néanmoins, des rapports
    d'utilisateurs seraient appréciés.

    <h2>Section 2 - Compilation et Installation</h2>

    <h3><a name="2.1">Q2.1. Où puis-je trouver les sources ?</a></h3>

    <p align="justify">Le site de base du développement se trouve sur <a href=
    "http://elks.sf.net/">http://elks.sf.net/</a>.

    <p align="justify">L'environnement de développement Dev86 se trouve sur la <a href="http://www.cix.co.uk/~mayday">page
    de Robert de Bath</a>.</p>

    <p align="justify">Si vous connaissez d'autres sites, ou désirez en créer un, contactez le responsable.</p>

    <h3><a name="2.2">Q2.2. Comment créer un noyau ELKS ?</a></h3>

    <p align="justify">Les mises à jour récentes contiennent un noyau binaire compilé que la plupart des gens peuvent
    utiliser pour commencer à tester. Vous devriez seulement avoir besoin de le compiler si vous désirez modifier le noyau,
    ou changer les options de configuration. Le fichier <tt>boot</tt>, contenu dans images.zip, peut être écrit sur une
    disquette via la commande dd ou RAWRITE.EXE pour créer une disquette noyau.

    <p align="justify">Si vous voulez compiler votre propre noyau, récupérezdev86/Dev86src-0.16.3.tar.gz et elks-0.1.0.tar.gz
    (ou les dernières versions) sur les sites de SourceForge et celui de Robert de Bath. Décompressez les, par exemple, dans
    /usr/src :</p>

<pre>
    tar -xvzf Dev86src-0.16.3.tar.gz -C /usr/src
    tar -xvzf elks-0.1.0.tar.gz -C /usr/src
</pre>

    <p align="justify">L'environnement de développement sera décompressé dans /usr/src/linux-86, et les sources du noyau
    dans /usr/src/elks. Vous devrez ensuite compiler les outils de développement, incluant le compilateur spécifique
    <b>bcc</b> :</p>
<pre>
    cd /usr/src/linux-86
    make; make install
</pre>

    <p align="justify">Ceci fait, attaquez vous à la compilation du noyau:</p>
<pre>
    cd /usr/src/elks
    make dep
    make config
    make
</pre>

    <p align="justify">make config fonctionne de la même manière que sur le noyau Linux standard. La configuration par défaut
fonctionnera sur la majorité des systèmes. Ne changez aucune des options si vous ne savez pas ce que vous faîtes.</p>

    <p align="justify">(Si vous êtes habitués à compiler des noyaux Linux par gcc, vous serez amusés par la rapidité à
    laquelle celle-ci se fait !) Le résultat en est une image nommée Image, que vous pouvez copier sur une disquette
    formatée, ce qui vous permettra de lancer le noyau:</p>
<pre>
    dd if=Image of=/dev/fd0
</pre>

    <p align="justify">ou bien</p>
<pre>
    make disk
</pre>

    <p align="justify">Vous devriez maintenant pouvoir lancer le système par la disquette, mais vous n'obtiendrez pas
    beaucoup plus sans disquette root à mounter. Pour celà, vous avez sur le site ftp de l'ELKS un fichier nommé images.zip;
    il contient un noyau (boot), une disquette principale (root) et une disquette 720k complète (comb) permettant de booter
    avec une seule disquette.</p>

    <p align="justify">Vous pouvez également créer votre propre disquette principale; ceci sera développé en <a href=
    "#2.5">question 2.5</a>.</p>

    <h3><a name="2.3">Q2.3. J'obtiens une erreur m'affirmant que /usr/include/linux/vm86.h n'existe pas ?</a></h3>

    <p align="justify">Editez <b>/usr/include/sys/vm86.h</b> et remplacez <b>#include &lt;linux/vm86.h&gt;</b> par
    <b>#include &lt;asm/vm86.h&gt;</b></p>

    <h3><a name="2.4">Q2.4. Comment créer un 'init' pour ELKS ?</a></h3>

    <p align="justify">Une fois le noyau ELKS booté, il lance /bin/init. Une vraie version d'init est en préparation pour
    inclusion dans le paquetage des tiny-utils, que l'on peut trouver sur linux.mit.edu. Un init et un login très basiques
    peuvent être trouvées dans la partie sysutils du paquetage elkscmd, distribué avec chaque mise à jour. Le code du noyau a
    changé récemment, et celui-ci lance dorénavant /bin/init à la place de /bin/sh.</p>

    <p align="justify">Pour installer init et login, il faut les compiler tous les deux avec...<p>
    <pre>  bcc -0 -O -ansi -s init.c -o init<br>   bcc -0 -O -ansi -s login.c -o login<br></pre>

    <p align="justify"> <code>-0</code> selects 8086 code generation,<br>
   <code>-O</code> enables optimisation,<br>
   <code>-ansi</code> enables ansi-style function prototypes (only), and<br>
   <code>-s</code> strips symbols out of the binary.</p>

   <p align="justify">... et copiez les dans le répertoire /bin de votre disque principal. Le programme login nécessite un
   /etc/passwd et un /etc/group, et un /bin/sh (ou autre, dépendant de l'entrée dans /etc/passwd).</p>

    <p align="justify">A partir du noyau 0.0.56, sash fonctionne et est utilisé comme /bin/sh par la plupart des gens. Il
    peut être trouvé dans le paquetage elkscmd. Pour de meilleurs résultats, copiez /etc/passwd et /etc/group d'une
    distribution Linux standard sur la disquette root; ainsi, ls -l fonctionnera proprement, et /usr/lib/liberror.txt pour que
    sash puisse reporter les erreurs.</p>

    <h3><a name="2.5">Q2.5. Comment créer un 'root filesystem disk' ?</a></h3>

    <p align="justify">Vous devrez créer une disquette minix contenant les fichiers et octets appropriés. Pour l'instant, 2
    fichiers seulement sont nécessaires - /dev/tty (4,0) et /bin/init, qui lancera le getty, qui a son tour lancera un
    shell. Vous pourrez egalement trouver les commandes classiques - mount, cp, cat, rm, ... Mais n'attendez pas beaucoup
    plus de l'elks pour l'instant... Il y a beaucoup de travail à faire.</p>

    <p align="justify"><i>Note: /dev/tty est différent de celui que le Linux normal utilise (5,0).</i></p>

    <p align="justify">Alternativement, si vous avez un noyau &gt;= 2.0.x et mount &gt;= 2.5k, vous pouvez utiliser le
    système de fichiers loopback pour créer une image disque sur votre disque dur, et ensuite la basculer sur la
    disquette.</p>
<pre>
    dd if=/dev/zero of=root.image bs=1k count=80
    mkfs -t minix root.image
    mount -o loop root.image -t minix /mnt  # /mnt est le mount point
    ...
    umount /disk
    dd if=root.image of=/dev/fd0
</pre>

    <p align="justify"><i>Surtout ne pas compresser l'image de la disquette root ! cette fonction n'est pas encore
    implémentée dans l'elks.</i></p>

    <h3><a name="2.6">Q2.6. Que faire si mon XT a un lecteur 360k ?</a></h3>

    <p align="justify">&gt;Préparer les images boot et root devant tourner sur une autre machine requiert un peu
    d'attention, spécialement si la machine a un lecteur 360k. Les lecteurs 5'1/4 360k comportent des têtes à 40 tracks,
    alors que les lecteur 1,2 Mo ont 80 tracks. Ainsi, un lecteur 1,2 Mo peut lire des disquettes 360k mais pas forcément
    les écrire, car le lecteur 1,2Mo écrira des tracks de taille moitié moindre que celle attendue par le lecteur 360ko.</p>

    <p align="justify">Une solution peut être de placer le lecteur 360ko comme 2nd lecteur de votre PC - ce qui vous
    permettra de formater les disquettes 360ko avec fdformat /dev/fd1d360 et créer un système tel celui décrit
    ci-dessus.</p>

    <p align="justify">Une autre solution consiste à créer une image de la disquette, puis à la transférer sur le PC
    contenant le lecteur 360ko (avec un câble série), et utiliser ensuite "<a href="#2.7">rawrite</a>" pour construire la
    disquette à partir de l'image.</p>

    <h3><a name="2.7">Q2.7. Le programme rawrite</a></h3>

    <p align="justify">Rawrite est un programme permettant d'écrire une image sur une disquette. Il permet de transcrire les
    images du noyau ELKS et de sa root image associée sur 2 disquettes 360ko. Programmes nécessaires:</p>

    <ul>
      <li><a href="ftp://tsx-11.mit.edu/pub/linux/dos_utils/rawrite.exe">rawrite</a></li>

      <li><a href="ftp://tsx-11.mit.edu/pub/linux/dos_utils/rawrite.c">Sources de rawrite</a></li>
    </ul>
    <hr width="90%">

    <h2>Section 3 - Utiliser ELKS</h2>

    <h3><a name="3.1">Q3.1. Puis-je utiliser des binaires bcc sous Linux ?</a></h3>

    <p align="justify">Oui - en chargeant un module dans le noyau vous pourrez directement exécuter des binaires ELKS. Celà
    rend le développement de programmes destinés à tourner sous ELKS bien moins pénible, puisque vous pouvez directement les
    tester sur un système Linux normal (avec cependant comme réserve le fait qu'ils peuvent ne pas fonctionner sous ELKS, si
    le programme utilise des implants du noyau qui n'existeraient pas encore dans ELKS).</p>
<pre>
    cd /usr/src/linux-86/elksemu
    make module
    insmod binfmt_elks.o
</pre>

    <p align="justify">A noter, vous devrez relancer 'insmod' à chaque lancement.<br>
    Si, lors de la compilation du module, vous obtenez une erreur indiquant "modversions.h: no such file or directory",
    alors vous devrez éditer le Makefile pour retirer la référence à ce fichier, c'est-à-dire:</p>
<pre>
    MODCFLAGS=-D__KERNEL__ -Wall -Wstrict-prototypes -O2 \
        -fomit-frame-pointer -fno-strength-reduce -pipe \
        -m486 -DCPU=486 -DMODULE -DMODVERSIONS
</pre>

    <h3><a name="3.2">Q3.2. Puis-je booter l'ELKS sous DOSEMU ?</a></h3>

    <p align="justify">Oui. ELKS peut se lancer avec dosemu &gt; 0.63 et linux ^gt; 2.0.7. Vérifiez que votre lecteur de
    disquette est configuré correctement dans /etc/dosemu.conf, et utilisez l'option -A pour forcer le lancement sur la
    disquette.</p>
    <hr width="90%">

    <p align="center">This document is released under the terms of the <a href="http://www.fsf.org/licenses/gpl.html">GNU
    General Public Licence</a>, version 2 only.</p>
  </body>
</html>

